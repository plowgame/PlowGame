repeat wait() until game:IsLoaded()

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local VirtualUser = game:GetService("VirtualUser")
local HttpService = game:GetService("HttpService")
local TeleportService = game:GetService("TeleportService")
local RunService = game:GetService("RunService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

-- üîÑ Ch·∫∑n AFK
LocalPlayer.Idled:Connect(function()
    VirtualUser:CaptureController()
    VirtualUser:ClickButton2(Vector2.new())
end)

-- üî• K√≠ch ho·∫°t NoClip (ƒëi xuy√™n t∆∞·ªùng)
local NoClip = true
RunService.Stepped:Connect(function()
    if NoClip and LocalPlayer.Character then
        for _, part in pairs(LocalPlayer.Character:GetChildren()) do
            if part:IsA("BasePart") and part.CanCollide then
                part.CanCollide = false
            end
        end
    end
end)

-- üè¥ T·ª± ƒë·ªông ch·ªçn H·∫£i T·∫∑c khi v√†o game
if game.PlaceId == 2753915549 or game.PlaceId == 4442272183 or game.PlaceId == 7449423635 then
    local args = { [1] = "SetTeam", [2] = "Pirates" }
    ReplicatedStorage.Remotes.CommF_:InvokeServer(unpack(args))
    wait(1)
    ReplicatedStorage.Remotes.CommF_:InvokeServer("TeleportToSpawn")
end

-- üñ•Ô∏è UI
local screenGui = Instance.new("ScreenGui", LocalPlayer:FindFirstChild("PlayerGui"))
screenGui.Name = "PlowHubUI"

local Frame = Instance.new("Frame", screenGui)
Frame.Size = UDim2.new(0, 250, 0, 130)
Frame.Position = UDim2.new(0.5, -125, 0.05, 0)
Frame.BackgroundColor3 = Color3.new(0, 0, 0)
Frame.BackgroundTransparency = 0.4
Frame.BorderSizePixel = 2

local Title = Instance.new("TextLabel", Frame)
Title.Size = UDim2.new(1, 0, 0.2, 0)
Title.TextScaled = true
Title.TextColor3 = Color3.fromRGB(173, 216, 230)
Title.BackgroundTransparency = 1
Title.Text = "üåê Plow Game | Community"

-- üîé Tr·∫°ng th√°i tr√°i √°c qu·ª∑
local StatusLabel = Instance.new("TextLabel", Frame)
StatusLabel.Size = UDim2.new(1, 0, 0.4, 0)
StatusLabel.Position = UDim2.new(0, 0, 0.25, 0)
StatusLabel.TextSize = 18
StatusLabel.TextColor3 = Color3.new(1, 1, 1)
StatusLabel.BackgroundTransparency = 1
StatusLabel.Text = "üîé ƒêang ki·ªÉm tra tr√°i √°c qu·ª∑..."

-- üñ•Ô∏è FPS Counter
local FpsLabel = Instance.new("TextLabel", Frame)
FpsLabel.Size = UDim2.new(1, 0, 0.15, 0)
FpsLabel.Position = UDim2.new(0, 0, 0.8, 0)
FpsLabel.TextSize = 16
FpsLabel.TextColor3 = Color3.fromRGB(0, 255, 0)
FpsLabel.BackgroundTransparency = 1
FpsLabel.Text = "FPS: 60"

-- üéØ C·∫≠p nh·∫≠t FPS theo th·ªùi gian th·ª±c
RunService.RenderStepped:Connect(function()
    local fps = math.floor(1 / RunService.RenderStepped:Wait())
    FpsLabel.Text = "FPS: " .. fps
end)

-- üîç Ki·ªÉm tra tr√°i √°c qu·ª∑
local function FindFruits()
    for _, fruit in pairs(game.Workspace:GetChildren()) do
        if fruit:IsA("Tool") and string.find(fruit.Name, "Fruit") then
            return fruit
        end
    end
    return nil
end

-- üìç D·ªãch chuy·ªÉn
local function TeleportToPosition(position)
    if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
        LocalPlayer.Character.HumanoidRootPart.CFrame = position
    end
end

-- üîÑ Chuy·ªÉn server
local function SwitchServer()
    print("üåê ƒêang t√¨m server m·ªõi...")
    wait(2)
    
    local servers = HttpService:JSONDecode(game:HttpGet("https://games.roblox.com/v1/games/2753915549/servers/Public?sortOrder=Asc&limit=100"))
    for _, server in pairs(servers.data) do
        if server.playing < server.maxPlayers then
            TeleportService:TeleportToPlaceInstance(game.PlaceId, server.id, LocalPlayer)
            return
        end
    end
end

-- ‚úÖ L∆∞u tr·ªØ tr√°i v√†o kho
local function StoreFruit(fruitName)
    ReplicatedStorage.Remotes.CommF_:InvokeServer("StoreFruit", fruitName)
    print("‚úÖ ƒê√£ l∆∞u tr·ªØ: " .. fruitName)
    StatusLabel.Text = "‚úÖ ƒê√£ l∆∞u tr·ªØ tr√°i " .. fruitName .. "!"
end

-- üîÅ V√≤ng l·∫∑p ki·ªÉm tra & nh·∫∑t tr√°i
while true do
    local fruit = FindFruits()
    if fruit then
        print("üçè ƒê√£ t√¨m th·∫•y tr√°i √°c qu·ª∑! ƒêang nh·∫∑t...")
        StatusLabel.Text = "üçè T√¨m th·∫•y tr√°i √°c qu·ª∑!"
        TeleportToPosition(fruit.Handle.CFrame)
        wait(1)

        -- üèÜ Nh·∫∑t tr√°i & l∆∞u v√†o kho
        LocalPlayer.Character.Humanoid:EquipTool(fruit) -- üî• C·∫ßm l√™n tr∆∞·ªõc khi l∆∞u
        wait(1)
        StoreFruit(fruit.Name)

        -- ‚è≥ Ch·ªù r·ªìi ƒë·ªïi server
        wait(5)
        SwitchServer()
    else
        print("‚ùå Kh√¥ng c√≥ tr√°i √°c qu·ª∑! Chuy·ªÉn server sau 5 gi√¢y...")
        StatusLabel.Text = "‚ùå Kh√¥ng c√≥ tr√°i n√†o!"
        wait(5)
        SwitchServer()
    end
end
