-- Lấy người chơi và nhân vật
local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoidRootPart = character:WaitForChild("HumanoidRootPart")

-- Tạo ScreenGui
local screenGui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))

-- Tạo Frame chính (có thể di chuyển)
local frame = Instance.new("Frame", screenGui)
frame.Size = UDim2.new(0, 200, 0, 120)
frame.Position = UDim2.new(0.5, -100, 0.2, 0)
frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
frame.BorderSizePixel = 2
frame.BorderColor3 = Color3.fromRGB(255, 85, 85)
frame.Active = true
frame.Draggable = true -- Có thể kéo thả UI

-- Nút "Bypass To End"
local bypassButton = Instance.new("TextButton", frame)
bypassButton.Size = UDim2.new(1, 0, 0.4, 0)
bypassButton.Position = UDim2.new(0, 0, 0, 0)
bypassButton.Text = "Bypass To End"
bypassButton.Font = Enum.Font.GothamBold
bypassButton.TextSize = 18
bypassButton.TextColor3 = Color3.fromRGB(255, 255, 255)
bypassButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)

-- Nút "NoClip"
local noclipButton = Instance.new("TextButton", frame)
noclipButton.Size = UDim2.new(1, 0, 0.4, 0)
noclipButton.Position = UDim2.new(0, 0, 0.5, 0)
noclipButton.Text = "Toggle NoClip"
noclipButton.Font = Enum.Font.GothamBold
noclipButton.TextSize = 18
noclipButton.TextColor3 = Color3.fromRGB(255, 255, 255)
noclipButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)

-- Nút ẩn/hiện UI
local toggleUI = Instance.new("TextButton", screenGui)
toggleUI.Size = UDim2.new(0, 100, 0, 30)
toggleUI.Position = UDim2.new(0.9, 0, 0.1, 0) -- Góc phải trên màn hình
toggleUI.Text = "Toggle UI"
toggleUI.Font = Enum.Font.GothamBold
toggleUI.TextSize = 16
toggleUI.TextColor3 = Color3.fromRGB(255, 255, 255)
toggleUI.BackgroundColor3 = Color3.fromRGB(100, 50, 50)

-- Biến trạng thái NoClip
local noclipEnabled = false

-- Hàm "Bypass Teleport" (dịch chuyển từ từ)
local function bypassTeleport(targetPosition)
    local TweenService = game:GetService("TweenService")

    if humanoidRootPart then
        local tweenInfo = TweenInfo.new(5, Enum.EasingStyle.Linear) -- 5 giây để di chuyển
        local goal = {CFrame = CFrame.new(targetPosition)}

        local tween = TweenService:Create(humanoidRootPart, tweenInfo, goal)
        tween:Play()
    end
end

-- Hàm bật/tắt NoClip
local function toggleNoClip()
    noclipEnabled = not noclipEnabled

    while noclipEnabled do
        if character and character:FindFirstChild("HumanoidRootPart") then
            for _, part in pairs(character:GetDescendants()) do
                if part:IsA("BasePart") then
                    part.CanCollide = false
                end
            end
        end
        wait()
    end

    -- Khi tắt NoClip, bật va chạm lại
    if character then
        for _, part in pairs(character:GetDescendants()) do
            if part:IsA("BasePart") then
                part.CanCollide = true
            end
        end
    end
end

-- Khi bấm nút "Bypass To End"
bypassButton.MouseButton1Click:Connect(function()
    bypassTeleport(Vector3.new(-346, -69, -49060))
end)

-- Khi bấm nút "Toggle NoClip"
noclipButton.MouseButton1Click:Connect(toggleNoClip)

-- Khi bấm nút "Toggle UI"
toggleUI.MouseButton1Click:Connect(function()
    frame.Visible = not frame.Visible
end)
